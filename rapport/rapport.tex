\documentclass[a4paper,11pt]{scrartcl}

\usepackage{graphicx}
\usepackage[utf8]{inputenc} %-- pour utiliser des accents en français
\usepackage{url}
\usepackage[left=20mm,top=20mm]{geometry}
\usepackage[french]{babel}
\usepackage{hyperref}
\title{Sécurité - CVE 2018--10933}
\author{Cyril Dussert - Emilien Mottet\\ \url{https://www.cvedetails.com/cve/CVE-2018-10933/}}
\date{\today}

\begin{document}

\maketitle

\section{Service compromis}\label{sec:serviceCompromis}

La faille de sécurité etudiée (CVE 2018--10933) concerne la librairie \verb|libssh| côté serveur dans les versions inférieures à 0.7.6 et 0.8.4. Néanmoins, des systèmes Linux embarquent la librairie dans leurs dépôts. Ces systèmes deviennent ainsi aussi vulnérables.
Il s'agit d'Ubuntu pour ses versions LTS (14.04, 16.04 et 18.04), ainsi que Debian Stretch (9.0).
Le risque est un contournement de la politique de sécurité.

Le type de cette faille est principalement \verb|Authentication Issues|.

Cette faille de sécurité affecte les applications qui utilisent \verb|libssh| pour implémenter un serveur SSH. Le client SSH n'est pas concerné.
Cette faille ne concerne pas \verb|libssh2| ni \verb|openssh|.

\section{Description de la vulnérabilité}\label{sec:descriptionDeLaVulnerabilite}
Cette faille permet une authentification non autorisée sur un serveur.
Au cours de l'échange lors de l'authentification d'un client aurpès d'un serveur, la simple présentation d'un message \verb|SSH2_MSG_USERAUTH_SUCCESS| de la part du client, à la place d'un \verb|SSH2_MSG_USERAUTH_REQUEST| (normalement attendu).
permet à l'attaquant de s'authentifier correctement sans aucun besoin d'identifiants.

\begin{figure}
\begin{center}
    \includegraphics[scale=0.7]{./images/draw-cve-2018-10933.jpg}
    \caption{CVE-2018-10933 in real world}
    \label{CVE-2018-10933 in real world}
  \end{center}
\end{figure}


\section{Cibles de la faille}\label{sec:ciblesDeLaFaille}
Comme décrit ci-dessus, les cibles concernées par cette faille sont les serveurs utilisant la librairie \verb|libssh| comme serveur SSH.
\subsection{Versions concernées}\label{subsec:versionsConcernees}
\begin{itemize}
    \item Versions supérieures à 0.6
    \item Version inférieures à 0.7.6
    \item Version inférieures à 0.8.4
\end{itemize}

\subsection{Trouver des victimes}\label{subsec:trouvervictimes}
Grâce à shodan (google du hacker) nous pouvons trouver une liste de serveur
utilisant une librairie potentiellement. Screenshot disponible dans le README.md

\url{https://www.shodan.io/search?query=product%3A%22libssh%22+version%3A%220.6.3%22}

\section{Exemple d'architecture}\label{sec:exempleD'architecture}

La dangerosité de cette faille est qu'il n'y a pas besoin d'une architecture spécifique pour l'exploiter.
Il suffit d'un serveur, accessible sur un réseau (par exemple, internet), utilisant \verb|libssh| pour son serveur SSH et d'un client malicieux.

\section{Préconisations de sécurité}\label{sec:preconisationsDeSecurite}
Etant donné qu'il n'y à pas de workaround directement accessible pour palier cette faille, la meilleure solution pour s'en protéger est de mettre à jour \textbf{régulièrement} les librairies présentes sur le serveur.
Peu de temps après la découverte de la faille, un patch correctif (versions 0.7.6 et 0.8.4) était disponible.

Un bon moyen de suivre les différents problèmes de sécurité importants est de regarder régulièrement les bugs les plus critiques déclarés par les différents systèmes d'exploitation (par exemple, Ubuntu security notices : \url{https://usn.ubuntu.com/}).
Il va de soi que le mieux est d'avoir une infrastructure homogène (mêmes bases logicielles sur différents serveurs), afin de pouvoir réagir efficacement (un seul patch à appliquer).

Dans le cas des systèmes RedHat Enterprise Linux, les notifications par mail des nouvelles failles sont très efficaces.
De plus, il ne faut pas hésiter à faire appel au support en cas de doute sur n'importe quel point en rapport avec le système d'exploitation.

\subsection{Bonnes pratiques à mettre en oeuvre}\label{sec:bonnesPratiquesAMettreEnOeuvre}
Voici une liste de bonnes pratiques qui pourraient vous sauver la vie dans le cadre de cette faille :
\begin{itemize}
    \item Mettre à jour le système régulièrement
    \item Ne pas exposer son serveur SSH directement sur internet (bien configurer son iptables)
    \item Changer le port d'écoute par défaut de SSH (2222 par exemple)
    \item Interdire à root de se connecter au serveur via SSH
    \item Utiliser un framework de prévention d'intrusions (ex : Fail2ban)
\end{itemize}
\section{PSSI ?}\label{sec:pssi}

\section{Expérimentation}\label{sec:experimentation}

\end{document}